<mvc:View controllerName="code.d07.exam2.controller.Main"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
>
    <Page id="page" title="{i18n>title}">
        <!-- 상품 재고 목록 -->
        <Panel
            class="sapUiResponsiveMargin"
            width="auto"
        >
            <!-- 툴바: 제목, ComboBox -->
            <headerToolbar>
                <Toolbar>
                    <Title text="{i18n>toolbarTitle}"/>
                    <ToolbarSpacer />
                    <Label text="{i18n>labelComboBox}"/>
                    <!-- ComboBox에서 세 가지 아이템 선택 가능
                        기본 값은 "전체"
                        선택시 selectionChange 이벤트를 이용해 changingComboBoxKey 함수 실행 -->
                    <ComboBox
                        id="idComboBox"
                        selectedKey="{i18n>textKeyAll}"
                        selectionChange=".changingComboBoxKey"
                    >
                        <items>
                            <core:Item key="{i18n>textKeyAll}" text="{i18n>textAll}"/>
                            <core:Item key="{i18n>textKeyBusan}" text="{i18n>textBusan}"/>
                            <core:Item key="{i18n>textKeySeoul}" text="{i18n>textSeoul}"/>
                        </items>
                    </ComboBox>
                </Toolbar>
            </headerToolbar>
            <!-- model/ex2data.json에서 Products 데이터 바인딩
                Storage 값에 따라 sorting 및 grouping -->
            <List
                id="idList"
                items="{
                    path: '/Products',
                    sorter: [{
                        path: 'Storage',
                        group: true
                    }]
                }"
            >
                <items>
                    <!-- 각 오브젝트 마다 이름,창고 장소, 가격, 수량, 재고상태 표기 -->
                    <ObjectListItem
                        title="{ProductName}"
                        number="{
                            parts: [
                                'Quantity',
                                'Unit'
                            ],
                            type: 'sap.ui.model.type.Unit',
                            formatOptions: { showMeasure: false }
                        }"
                        numberUnit="{Unit}"
                    >
                        <!-- 재고상태 -->
                        <firstStatus>
                            <ObjectStatus 
                                title="{i18n>textQuantityState}: "
                                text="{
                                    path: 'Quantity',
                                    formatter: '.formatter.quantityText'
                                }"
                                state="{
                                    path: 'Quantity',
                                    formatter: '.formatter.quantityState'
                                }"
                            />
                        </firstStatus>
                        <!-- 창고, 가격 -->
                        <attributes>
                            <ObjectAttribute 
                                title="{i18n>textWarehouse}"
                                text="{Storage}"
                            />
                            <ObjectAttribute 
                                title="{i18n>textPrice}"
                                text="{
                                    parts: [
                                        'Price',
                                        'Currency'
                                    ],
                                    type: 'sap.ui.model.type.Currency'
                                }"
                            />
                        </attributes>
                    </ObjectListItem>
                </items>
            </List>
        </Panel>


    </Page>
</mvc:View>